services:


# ----------------------------------------------------------------------------------------------------------------------
#  Services
# ----------------------------------------------------------------------------------------------------------------------

    neo4j_sync.neo4j_client:
        class: Syndesi\Neo4jSyncBundle\Service\Neo4jClient
        public: true
        tags:
            - name: 'monolog.logger'
              channel: 'neo4j_sync'
        arguments:
            - '@logger'

    Syndesi\Neo4jSyncBundle\Service\Neo4jClient: '@neo4j_sync.neo4j_client'


    neo4j_sync.neo4j_client_factory:
        class: Syndesi\Neo4jSyncBundle\Service\Neo4jClientFactory
        public: true

    Syndesi\Neo4jSyncBundle\Service\Neo4jClientFactory: '@neo4j_sync.neo4j_client_factory'


# ----------------------------------------------------------------------------------------------------------------------
#  Event subscribers
# ----------------------------------------------------------------------------------------------------------------------

    Syndesi\Neo4jSyncBundle\EventListener\DoctrinePostFlushSubscriber:
        class: Syndesi\Neo4jSyncBundle\EventListener\DoctrinePostFlushSubscriber
        public: false
        tags:
            - 'doctrine.event_subscriber'
        arguments:
            - '@neo4j_sync.neo4j_client'


    Syndesi\Neo4jSyncBundle\EventListener\DoctrinePostPersistNodeSubscriber:
        class: Syndesi\Neo4jSyncBundle\EventListener\DoctrinePostPersistNodeSubscriber
        public: false
        tags:
            - 'doctrine.event_subscriber'
        arguments:
            - '@neo4j_sync.neo4j_client'


    Syndesi\Neo4jSyncBundle\EventListener\DoctrinePostPersistRelationSubscriber:
        class: Syndesi\Neo4jSyncBundle\EventListener\DoctrinePostPersistRelationSubscriber
        public: false
        tags:
            - 'doctrine.event_subscriber'
        arguments:
            - '@neo4j_sync.neo4j_client'


    Syndesi\Neo4jSyncBundle\EventListener\DoctrinePostUpdateNodeSubscriber:
        class: Syndesi\Neo4jSyncBundle\EventListener\DoctrinePostUpdateNodeSubscriber
        public: false
        tags:
            - 'doctrine.event_subscriber'
        arguments:
            - '@neo4j_sync.neo4j_client'


    Syndesi\Neo4jSyncBundle\EventListener\DoctrinePostUpdateRelationSubscriber:
        class: Syndesi\Neo4jSyncBundle\EventListener\DoctrinePostUpdateRelationSubscriber
        public: false
        tags:
            - 'doctrine.event_subscriber'
        arguments:
            - '@neo4j_sync.neo4j_client'


    Syndesi\Neo4jSyncBundle\EventListener\DoctrinePreRemoveNodeSubscriber:
        class: Syndesi\Neo4jSyncBundle\EventListener\DoctrinePreRemoveNodeSubscriber
        public: false
        tags:
            - 'doctrine.event_subscriber'
        arguments:
            - '@neo4j_sync.neo4j_client'


    Syndesi\Neo4jSyncBundle\EventListener\DoctrinePreRemoveRelationSubscriber:
        class: Syndesi\Neo4jSyncBundle\EventListener\DoctrinePreRemoveRelationSubscriber
        public: false
        tags:
            - 'doctrine.event_subscriber'
        arguments:
            - '@neo4j_sync.neo4j_client'


# ----------------------------------------------------------------------------------------------------------------------
#  Commands
# ----------------------------------------------------------------------------------------------------------------------
